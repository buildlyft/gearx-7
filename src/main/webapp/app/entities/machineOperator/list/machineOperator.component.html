<div>
  <h2 id="page-heading">
    <span>Machine Operators</span>

    <div class="d-flex justify-content-end">
      <!-- Refresh Button -->
      <button class="btn btn-info me-2" (click)="load()" [disabled]="isLoading">
        <fa-icon icon="sync" [spin]="isLoading"></fa-icon>
        <span>Refresh list</span>
      </button>

      <!-- Assign Operator Button -->
      <button class="btn btn-primary" [routerLink]="['/machine-operator/new']" [disabled]="noMachinesAvailable">
        <fa-icon icon="plus"></fa-icon>
        <span>Assign Operator to Machine</span>
      </button>
    </div>

    <div *ngIf="noMachinesAvailable" class="alert alert-info mt-2">All machines already have assigned operators.</div>
  </h2>

  <!-- Table -->
  <table class="table table-striped" *ngIf="machineOperators && machineOperators.length > 0">
    <thead>
      <tr>
        <th>Operator ID</th>
        <th>Machine Name</th>
        <th>Driver Name</th>
        <th>Driver Number</th>
        <th>Address</th>
        <th>Status</th>
        <th>License Issue Date</th>
        <th></th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let operator of machineOperators">
        <td>
          <a [routerLink]="['/machine-operator', operator.machineId, 'view']">
            {{ operator.operatorId }}
          </a>
        </td>

        <td>
          {{ getMachineName(operator.machineId) }}
        </td>

        <td>{{ operator.driverName }}</td>
        <td>{{ operator.operatorContact }}</td>
        <td>{{ operator.address }}</td>
        <td>
          <span class="badge" [ngClass]="operator.active ? 'bg-success' : 'bg-danger'">
            {{ operator.active ? 'Active' : 'Inactive' }}
          </span>
        </td>
        <td>{{ operator.licenseIssueDate | date: 'dd-MM-yyyy' }}</td>

        <td class="text-end">
          <a [routerLink]="['/machine-operator', operator.machineId, 'view']" class="btn btn-info btn-sm me-1">
            <fa-icon icon="eye"></fa-icon>
            View
          </a>

          <a [routerLink]="['/machine-operator', operator.machineId, 'edit']" class="btn btn-primary btn-sm me-1">
            <fa-icon icon="pencil-alt"></fa-icon>
            Edit
          </a>

          <button (click)="delete(operator)" class="btn btn-danger btn-sm">
            <fa-icon icon="times"></fa-icon>
            Delete
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="machineOperators?.length === 0" class="alert alert-warning">No Machine Operators found</div>
</div>
